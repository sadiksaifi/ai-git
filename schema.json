{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/sadiksaifi/ai-git/main/schema.json",
  "title": "AI Git Configuration",
  "description": "Configuration schema for AI Git CLI tool",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string"
    },
    "mode": {
      "type": "string",
      "enum": ["cli", "api"],
      "description": "Connection mode. 'cli' uses installed AI CLI tools (claude, gemini), 'api' uses API keys (OpenRouter, OpenAI, Anthropic, Gemini).",
      "default": "cli"
    },
    "editor": {
      "type": "string",
      "description": "Preferred editor command (e.g. 'vim', 'nvim', 'nano'). Overrides $EDITOR environment variable.",
      "examples": ["vim", "nvim", "nano"]
    },
    "provider": {
      "type": "string",
      "enum": ["claude", "gemini", "openrouter", "openai", "gemini-api", "anthropic"],
      "description": "AI provider to use for generating commit messages.",
      "examples": ["claude", "gemini", "openrouter", "openai", "gemini-api", "anthropic"]
    },
    "model": {
      "type": "string",
      "description": "Model ID to use for the selected provider.",
      "examples": [
        "haiku",
        "sonnet",
        "opus",
        "gemini-3-flash-preview",
        "anthropic/claude-3.5-haiku",
        "gpt-4o-mini",
        "gemini-2.0-flash",
        "claude-3-5-haiku-latest"
      ]
    },
    "defaults": {
      "type": "object",
      "description": "Default workflow behavior options.",
      "properties": {
        "stageAll": {
          "type": "boolean",
          "description": "Automatically stage all changes (git add -A) before analysis.",
          "default": false
        },
        "commit": {
          "type": "boolean",
          "description": "Automatically commit with the generated message (skip confirmation).",
          "default": false
        },
        "push": {
          "type": "boolean",
          "description": "Automatically push after committing.",
          "default": false
        }
      },
      "additionalProperties": false
    },
    "prompt": {
      "type": "object",
      "description": "Prompt customization options. These supplement (not replace) the base system prompt.",
      "properties": {
        "context": {
          "type": "string",
          "description": "Project-specific context to help the AI understand your codebase.",
          "examples": [
            "React Native app using Expo SDK 54. Jira tickets: PROJ-123",
            "Monorepo with packages: web, mobile, shared, api"
          ]
        },
        "style": {
          "type": "string",
          "description": "Style preferences for commit messages.",
          "examples": [
            "Always include scope when possible",
            "Keep body under 5 bullet points",
            "Reference ticket IDs from branch name in footer"
          ]
        },
        "examples": {
          "type": "array",
          "description": "Custom commit message examples. If provided, these replace the default examples. Each string should be a complete commit message.",
          "items": {
            "type": "string"
          },
          "examples": [
            [
              "feat(auth): add SSO integration\n\n- implement SAML 2.0 authentication\n- add identity provider configuration",
              "fix(api): resolve rate limiting bypass\n\n- add per-user rate limit tracking"
            ]
          ]
        }
      },
      "additionalProperties": false
    },
    "api": {
      "type": "object",
      "description": "API-specific configuration options (only used when mode is 'api').",
      "properties": {
        "modelCacheTTL": {
          "type": "number",
          "description": "Hours to cache the model list from API providers. Default: 48 hours.",
          "default": 48,
          "minimum": 1,
          "maximum": 168
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["mode", "provider", "model"],
  "additionalProperties": false,
  "allOf": [
    {
      "if": {
        "properties": {
          "provider": { "const": "claude" }
        }
      },
      "then": {
        "properties": {
          "model": {
            "enum": ["haiku", "sonnet", "opus"],
            "description": "Claude CLI model to use. 'haiku' is recommended for speed and cost."
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "provider": { "const": "gemini" }
        }
      },
      "then": {
        "properties": {
          "model": {
            "enum": [
              "gemini-3-flash-preview",
              "gemini-3-pro-preview",
              "gemini-2.5-flash-lite",
              "gemini-2.5-flash",
              "gemini-2.5-pro"
            ],
            "description": "Gemini CLI model to use. 'gemini-3-flash-preview' is recommended for speed."
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "provider": { "const": "openrouter" }
        }
      },
      "then": {
        "properties": {
          "model": {
            "type": "string",
            "description": "OpenRouter model ID (e.g., 'anthropic/claude-3.5-haiku'). Models are fetched dynamically."
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "provider": { "const": "openai" }
        }
      },
      "then": {
        "properties": {
          "model": {
            "type": "string",
            "description": "OpenAI model ID (e.g., 'gpt-4o-mini'). Models are fetched dynamically."
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "provider": { "const": "gemini-api" }
        }
      },
      "then": {
        "properties": {
          "model": {
            "type": "string",
            "description": "Google Gemini API model ID (e.g., 'gemini-2.0-flash'). Models are fetched dynamically."
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "provider": { "const": "anthropic" }
        }
      },
      "then": {
        "properties": {
          "model": {
            "type": "string",
            "description": "Anthropic API model ID (e.g., 'claude-3-5-haiku-latest'). Models are fetched dynamically."
          }
        }
      }
    }
  ]
}
